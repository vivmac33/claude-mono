@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════════════════
   CSS CUSTOM PROPERTIES FOR THEME SWITCHING
   ═══════════════════════════════════════════════════════════════════════════ */

:root {
  /* Light theme defaults */
  --bg-primary: theme('colors.slate.50');
  --bg-secondary: theme('colors.white');
  --bg-tertiary: theme('colors.slate.100');
  --bg-card: theme('colors.white');
  --bg-hover: theme('colors.slate.100');
  
  --text-primary: theme('colors.slate.900');
  --text-secondary: theme('colors.slate.600');
  --text-muted: theme('colors.slate.500');
  
  --border-primary: theme('colors.slate.200');
  --border-secondary: theme('colors.slate.300');
  
  --scrollbar-track: theme('colors.slate.200');
  --scrollbar-thumb: theme('colors.slate.400');
  --scrollbar-thumb-hover: theme('colors.slate.500');
}

.dark {
  --bg-primary: theme('colors.slate.950');
  --bg-secondary: theme('colors.slate.900');
  --bg-tertiary: theme('colors.slate.800');
  --bg-card: rgba(15, 23, 42, 0.8);
  --bg-hover: theme('colors.slate.800');
  
  --text-primary: theme('colors.slate.100');
  --text-secondary: theme('colors.slate.400');
  --text-muted: theme('colors.slate.500');
  
  --border-primary: theme('colors.slate.700');
  --border-secondary: theme('colors.slate.600');
  
  --scrollbar-track: theme('colors.slate.900');
  --scrollbar-thumb: theme('colors.slate.700');
  --scrollbar-thumb-hover: theme('colors.slate.600');
}

@layer base {
  * {
    border-color: var(--border-primary);
  }
  
  body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    @apply antialiased;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }
  
  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  
  ::-webkit-scrollbar-track {
    background-color: var(--scrollbar-track);
  }
  
  ::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-thumb);
    @apply rounded-full;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--scrollbar-thumb-hover);
  }
}

@layer components {
  /* Card base styles - theme aware */
  .card {
    @apply rounded-xl shadow-lg;
    background-color: var(--bg-card);
    border: 1px solid var(--border-primary);
    @apply backdrop-blur-sm;
  }
  
  .dark .card {
    border-color: rgba(51, 65, 85, 0.5);
  }
  
  .card-header {
    @apply p-4 pb-2;
  }
  
  .card-title {
    @apply text-base font-semibold;
    color: var(--text-primary);
  }
  
  .card-description {
    @apply text-xs;
    color: var(--text-secondary);
  }
  
  .card-content {
    @apply p-4 pt-0;
  }
  
  /* Mini card styles */
  .mini-card {
    @apply rounded-lg p-3;
    background-color: var(--bg-card);
    border: 1px solid var(--border-primary);
  }
  
  .dark .mini-card {
    border-color: rgba(51, 65, 85, 0.5);
  }
  
  /* Metric box */
  .metric-box {
    @apply rounded-lg px-3 py-2;
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-primary);
  }
  
  .dark .metric-box {
    background-color: rgba(30, 41, 59, 0.3);
    border-color: rgba(51, 65, 85, 0.3);
  }
  
  /* Badge variants */
  .badge {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-semibold uppercase tracking-wider;
  }
  
  .badge-success {
    @apply bg-emerald-600/90 text-white;
  }
  
  .badge-warning {
    @apply bg-amber-500/90 text-slate-900;
  }
  
  .badge-destructive {
    @apply bg-red-600/90 text-white;
  }
  
  .badge-secondary {
    @apply dark:bg-slate-700 dark:text-slate-200 bg-slate-200 text-slate-700;
  }
  
  .badge-outline {
    @apply dark:border-slate-600 dark:text-slate-300 border-slate-400 text-slate-600 bg-transparent border;
  }
  
  /* ═══════════════════════════════════════════════════════════════════════════
     REACT FLOW CUSTOM STYLES
     ═══════════════════════════════════════════════════════════════════════════ */
  
  /* React Flow container */
  .react-flow {
    background-color: var(--bg-primary);
  }
  
  /* React Flow background */
  .react-flow__background {
    background-color: var(--bg-primary);
  }
  
  /* React Flow controls */
  .react-flow__controls {
    @apply rounded-xl shadow-lg overflow-hidden;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-primary);
  }
  
  .react-flow__controls-button {
    background-color: var(--bg-secondary);
    border: none;
    color: var(--text-secondary);
    width: 28px;
    height: 28px;
  }
  
  .react-flow__controls-button:hover {
    background-color: var(--bg-hover);
    color: var(--text-primary);
  }
  
  .react-flow__controls-button svg {
    max-width: 14px;
    max-height: 14px;
  }
  
  /* React Flow minimap */
  .react-flow__minimap {
    @apply rounded-xl shadow-lg;
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-primary);
  }
  
  .dark .react-flow__minimap-mask {
    fill: rgba(0, 0, 0, 0.8);
  }
  
  .light .react-flow__minimap-mask {
    fill: rgba(255, 255, 255, 0.8);
  }
  
  /* React Flow edges */
  .react-flow__edge-path {
    stroke: #6366f1;
    stroke-width: 2;
  }
  
  .react-flow__edge.selected .react-flow__edge-path {
    stroke: #818cf8;
    stroke-width: 3;
  }
  
  .react-flow__edge.animated path {
    stroke-dasharray: 5;
    animation: dashdraw 0.5s linear infinite;
  }
  
  @keyframes dashdraw {
    from {
      stroke-dashoffset: 10;
    }
  }
  
  /* React Flow connection line */
  .react-flow__connection-line {
    stroke: #6366f1;
    stroke-width: 2;
  }
  
  /* React Flow attribution */
  .react-flow__attribution {
    @apply hidden;
  }
  
  /* React Flow panel */
  .react-flow__panel {
    @apply m-0;
  }
  
  /* Handle styles */
  .react-flow__handle {
    @apply w-3 h-3 border-2;
    background-color: var(--bg-tertiary);
    border-color: var(--border-secondary);
    transition: all 0.15s ease;
  }
  
  .dark .react-flow__handle {
    @apply bg-slate-600 border-slate-500;
  }
  
  .react-flow__handle:hover {
    @apply bg-indigo-500 border-indigo-400;
    transform: scale(1.2);
  }
  
  .react-flow__handle-top {
    top: -6px;
  }
  
  .react-flow__handle-bottom {
    bottom: -6px;
  }
}

@layer utilities {
  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-emerald-400;
  }
  
  .text-gradient-indigo {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-400;
  }
  
  .glow {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
  }
  
  .glow-success {
    box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
  }
  
  .glow-danger {
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
  }
  
  .glow-indigo {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
  }
  
  .glow-teal {
    box-shadow: 0 0 20px rgba(20, 184, 166, 0.3);
  }
  
  /* Line clamp utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Shadow utilities */
  .shadow-node {
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }
  
  .shadow-node-hover {
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
  }
  
  .shadow-glow-indigo {
    box-shadow: 0 0 20px rgba(99, 102, 241, 0.3), 0 4px 20px rgba(0, 0, 0, 0.3);
  }
  
  /* Theme-aware text colors */
  .text-themed {
    color: var(--text-primary);
  }
  
  .text-themed-secondary {
    color: var(--text-secondary);
  }
  
  .text-themed-muted {
    color: var(--text-muted);
  }
  
  /* Theme-aware backgrounds */
  .bg-themed {
    background-color: var(--bg-primary);
  }
  
  .bg-themed-secondary {
    background-color: var(--bg-secondary);
  }
  
  .bg-themed-card {
    background-color: var(--bg-card);
  }
}
